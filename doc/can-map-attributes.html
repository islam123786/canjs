<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: [object Object]
	@module can-map-attributes
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	
	<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
</head>

<body>
	<header><nav class="navbar">
	<a class="brand" href="../index.html">CanJS</a>

	<ul class="bitovi-menu">
		<li class="dropdown">
			<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
			<ul class="dropdown-menu">
				<li><a href="http://bitovi.com">Bitovi.com</a></li>
				<li><a href="http://bitovi.com/blog/">Blog</a></li>
				<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
				<li><a href="http://bitovi.com/training/">Training</a></li>
				<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
			</ul>
		</li>
	</ul>

	<ul class="navbar-items">
		<li class="dropdown">
				<a href="http://github.com/canjs/canjs">Github</a>
				<ul class="dropdown-menu">
      		<li><a href="http://github.com/canjs/can-connect">can-connect</a></li>
					<li><a href=".">can-set</a></li>
					<li><a href=".">can-compute</a></li>
					<li><a href=".">can-component</a></li>
				</ul>
		</li>
		<li>
			<a href="https://gitter.im/canjs/canjs">Chat</a>
		</li>
		<li>
			<a href="http://forums.donejs.com/c/canjs">Forum</a>
		</li>
	</ul>

</nav>
</header>
	<div class='main-container'>

	<nav class="sidebar">
    
        
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.elementAndAttributes.html">
							Elements and Attributes
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-core.html">
							Core
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-ecosystem.html">
							Ecosystem
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-infrastructure.html">
							Infrastructure
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="can-legacy.html">
							Legacy
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="module"
							href="can-control.html">
							can-control
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="module"
							href="can-list.html">
							can-list
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="module"
							href="can-map.html">
							can-map
						</a>
						
					</li>
				

			
		
			
				
					<li class="current
                               parent
                               expanded">
						<a class="module"
							href="can-map-attributes.html">
							attributes
						</a>
						
							
	<ul>
		
			
				
					<li>
						<span>static</span>

						
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="property"
							href="can-map-attributes.static.attributes.html">
							attributes
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="property"
							href="can-map-attributes.static.convert.html">
							convert
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="property"
							href="can-map-attributes.static.serialize.html">
							serialize
						</a>
						
					</li>
				

			
		
	</ul>


					</li>
				

			
		
			
				
					<li>
						<span>prototype</span>

						
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can-map-attributes.prototype.serialize.html">
							serialize
						</a>
						
					</li>
				

			
		
	</ul>


					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Component.html">
							can.Component
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Construct.html">
							can.Construct
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Control.html">
							can.Control
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.List.html">
							can.List
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Map.html">
							can.Map
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Model.html">
							can.Model
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Model.List.html">
							can.Model.List
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.compute.html">
							can.compute
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.ejs.html">
							can.ejs
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.event.html">
							can.event
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.fixture.html">
							can.fixture
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.mustache.html">
							can.mustache
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.route.html">
							can.route
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.stache.html">
							can.stache
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.util.html">
							can.util
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.view.html">
							can.view
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.view.bindings.html">
							can.view.bindings
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="guides.html">
							Guides
						</a>
						
					</li>
				

			
		
	</ul>


    
</nav>


<article>
	
		<section class="title">
	<h1>attributes</h1>
</section>

	

	
		
			<section class="description">
    
</section>

		
	




<div class="signature">
  <h2 class="signature-title"><code>plugin</code></h2>
  
  
  
  
  
  
  
</div>





	
		
			<section class="body">
    <h2>Use</h2>
<p>can-map-attributes is a plugin that helps convert and normalize data being set on an Map
and allows you to specify the way complex types get serialized. The attributes plugin is most
helpful when used with [can-model] (because the serialization aids in sending data to a server),
but you can use it with any Map you plan to make instances
from.</p>
<p>There are three important static properties to give the class you want to use attributes with:</p>
<ul>
<li><code><a href="can-map-attributes.static.attributes.html">attributes</a></code> lists the properties that will be normalized
and the types those properties should be.</li>
<li><code><a href="can-map-attributes.static.convert.html">convert</a></code> lists how to convert and normalize arbitrary values
to the types this class uses.</li>
<li><code><a href="can-map-attributes.static.serialize.html">serialize</a></code> lists serialization algorithms for the types
this class uses.</li>
</ul>
<p>Together, the functions in <em>convert</em> and <em>serialize</em> make up the type definitions for the class.
The attributes plugin comes with three useful predefined types: <code>'date'</code>, <code>'number'</code>, and <code>'boolean'</code>.</p>
<p>Here is a quick example of an Map-based class using the attributes plugin to convert and normalize
its data, and then to serialize the instance:</p>
<pre><code>Bio = Map.extend({
    attributes: {
    birthday: 'date',
    weight: 'number'
}
// Bio only uses built-in types, so no
// need to specify serialize or convert.
}, {});

var alice = new Bio({
    birthday: Date.parse('1985-04-01'), // 481161600000
    weight: '120'
});

alice.attr();      // { birthday: Date(481161600000), weight: 120 }
alice.serialize(); // { birthday: 481161600000, weight: 120 }
</code></pre>
<h3>Demo</h3>
<p>When a user enters a new date in the format of <em>YYYY-MM-DD</em>, the control
listens for changes in the input box and updates the Map using
the <code>attr</code> method which then converts the string into a JavaScript date object.</p>
<p>Additionally, the control also listens for changes on the Map and
updates the age in the page for the new birthdate of the contact.</p>
<div class='demo_wrapper' data-demo-src='../src/demo/attributes.html'></div>
<h3>Reference types</h3>
<p>Types listed in <code>attributes</code> can also be a functions, such as the <code>model</code> or
<code>models</code> methods of a [can-model Model]. When data of this kind of type is set, this
function is used to convert the raw data into an instance of the Model.</p>
<p>This example builds on the previous one to demonstrate these reference types.</p>
<pre><code>Bio = Map.extend({
    attributes: {
    birthday: 'date',
    weight: 'number'
}
// Contact only uses built-in types, so you don't have
// to specify serialize or convert.
}, {});

Contact = Map.extend({
    attributes: {
        bio: 'Bio.newInstance'
    }
}, {});

var alice = new Contact({
    first: 'Alice',
    last: 'Liddell',
    bio: {
        birthday: Date.parse('1985-04-01'), // 481161600000
        weight: 120
    }
});
</code></pre>
<p>The Attributes plugin provides functionality for converting data attributes from raw types and
serializing complex types for the server.</p>
<p>Below is an example code of an Map providing serialization and conversion for dates and numbers.</p>
<p>When <code>Contact</code> is initialized, the <code>weight</code> attribute is set and converted to a <code>number</code> using the
converter we provided.  Next the <code>birthday</code> attribute is set using the <code>attr</code> method and gets converted
as well.  Lastly, <code>serialize</code> is invoked converting the new attributes to raw types for the server.</p>
<pre><code>var Contact = Map.extend({
    attributes: {
        birthday: 'date',
        weight: 'number'
    },
    serialize : {
        date : function( val, type ){
            // returns the string formatted as 'YYYY-DD-MM'
            return val.getYear() + 
                    &quot;-&quot; + (val.getMonth() + 1) + 
                    &quot;-&quot; + val.getDate(); 
        },
        number: function(val){
            return val + '';
        }
    },
    convert: {
        // converts string to date
        date: function( date ) {
            if ( typeof date == 'string' ) {
                //- Extracts dates formated 'YYYY-DD-MM'
                var matches = raw.match( /(\d+)-(\d+)-(\d+)/ ); 
                
                //- Parses to date object and returns
                date = new Date( matches[ 1 ],
                        ( +matches[ 2 ] ) - 1, 
                        matches[ 3 ] ); 
            }
            
            return date;
        },
    
        // converts string to number
        number: function(number){
            if(typeof number === 'string'){
                number = parseInt(number);
            }
            return number;
        }
    }
}, {});

var brian = new Contact({
    weight: '300'
});

var weight = brian.attr('weight'); //-&gt; 300

//- sets brian's birthday
brian.attr('birthday', '11-29-1983');

var date = brian.attr('birthday'); //-&gt; Date()

var seralizedObj = brian.serialize();
//-&gt; { 'birthday': '11-29-1983', 'weight': '300' }
</code></pre>
<h2>Converter functions</h2>
<p>Another common case is to create converter functions (<code>function(value, oldValue) {}</code>) that return a converted value:</p>
<pre><code>var ValueMap = Map.extend({
    attributes: {
        value: function(orig) {
            return orig * 100;
        }
    }
},{});

console.log(new ValueMap({ value: 0.83 }).attr('value'));
</code></pre>
<h2>Associations</h2>
<p>The attribute plugin also allows setting up data associations between Maps or Models. This means
that nested data structures can be automatically converted into their Map or Model (using <code>Model.models</code>) representations by passing them as the attribute.
If the value to convert is an array it will be converted into its <code><a href="can-list.html">Map.List</a></code> or <code>[can-model.List Model.List]</code> (using <code>[can-model.models Model.models]</code>) representation:</p>
<pre><code>var Sword = Model.extend({
    findAll: 'GET /swords'
}, {
    getPower: function() {
        return this.attr('power') * 100;
    }
});

var Level = Model.extend({
    findAll: 'GET /levels'
}, {
    getName: function() {
        return 'Level: ' + this.attr('name');
    }
});

var Zelda = Model.extend({
    findOne: 'GET /zelda/{id}'
    attributes: {
        sword: Sword,
        levelsCompleted: Level
    }
},{});
</code></pre>
<p>Assuming that <code>Zelda.findOne({ id: 'link' })</code> will return something like:</p>
<pre><code>{
    sword: {
        name: 'Wooden Sword',
        power: 0.2
    },
    levelsCompleted : [
        {id: 1, name: 'Aquamentus'},
        {id: 2, name: 'Dodongo'}
    ]
}
</code></pre>
<p>The converted data will contain a list or Levels and a sword Model:</p>
<pre><code>Zelda.findOne({ id: 'link' }).then(function(link) {
    console.log(link.attr('sword').getPower()); // -&gt; 20
    console.log(link.attr('levelsCompleted')[0].getName());
    // -&gt; 'Level: Aquamentus'
});
</code></pre>
<h3>Demo</h3>
<p>Below is a demo that showcases associations between 2 different models to show the tasks
for each contact and how much time they have left to complete the task(s) using converters.</p>
<div class='demo_wrapper' data-demo-src='../src/demo/attributes-assocations.html'></div>

</section>

		
	
</article>
</div>

	<footer><p>CanJS is part of <a href="http://donejs.com">DoneJS</a>. Created and maintained by the open source team at <a href="http://bitovi.com">Bitovi</a>. <strong>Currently v3.0.0.</strong></p></footer>

	<script type="text/javascript">
		var docObject = {"content":"<div class='main-container'>\n\n\t<nav class=\"sidebar\">\n    \n        \n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.elementAndAttributes.html\">\n\t\t\t\t\t\t\tElements and Attributes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-core.html\">\n\t\t\t\t\t\t\tCore\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-ecosystem.html\">\n\t\t\t\t\t\t\tEcosystem\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-infrastructure.html\">\n\t\t\t\t\t\t\tInfrastructure\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-legacy.html\">\n\t\t\t\t\t\t\tLegacy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"module\"\n\t\t\t\t\t\t\thref=\"can-control.html\">\n\t\t\t\t\t\t\tcan-control\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"module\"\n\t\t\t\t\t\t\thref=\"can-list.html\">\n\t\t\t\t\t\t\tcan-list\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"module\"\n\t\t\t\t\t\t\thref=\"can-map.html\">\n\t\t\t\t\t\t\tcan-map\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"current\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"module\"\n\t\t\t\t\t\t\thref=\"can-map-attributes.html\">\n\t\t\t\t\t\t\tattributes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>static</span>\n\n\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"property\"\n\t\t\t\t\t\t\thref=\"can-map-attributes.static.attributes.html\">\n\t\t\t\t\t\t\tattributes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"property\"\n\t\t\t\t\t\t\thref=\"can-map-attributes.static.convert.html\">\n\t\t\t\t\t\t\tconvert\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"property\"\n\t\t\t\t\t\t\thref=\"can-map-attributes.static.serialize.html\">\n\t\t\t\t\t\t\tserialize\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>prototype</span>\n\n\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can-map-attributes.prototype.serialize.html\">\n\t\t\t\t\t\t\tserialize\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Component.html\">\n\t\t\t\t\t\t\tcan.Component\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Construct.html\">\n\t\t\t\t\t\t\tcan.Construct\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Control.html\">\n\t\t\t\t\t\t\tcan.Control\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.List.html\">\n\t\t\t\t\t\t\tcan.List\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Map.html\">\n\t\t\t\t\t\t\tcan.Map\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Model.html\">\n\t\t\t\t\t\t\tcan.Model\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Model.List.html\">\n\t\t\t\t\t\t\tcan.Model.List\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.compute.html\">\n\t\t\t\t\t\t\tcan.compute\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.html\">\n\t\t\t\t\t\t\tcan.ejs\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.event.html\">\n\t\t\t\t\t\t\tcan.event\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.fixture.html\">\n\t\t\t\t\t\t\tcan.fixture\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.mustache.html\">\n\t\t\t\t\t\t\tcan.mustache\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.route.html\">\n\t\t\t\t\t\t\tcan.route\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.stache.html\">\n\t\t\t\t\t\t\tcan.stache\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.util.html\">\n\t\t\t\t\t\t\tcan.util\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.view.html\">\n\t\t\t\t\t\t\tcan.view\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.view.bindings.html\">\n\t\t\t\t\t\t\tcan.view.bindings\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"guides.html\">\n\t\t\t\t\t\t\tGuides\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n    \n</nav>\n\n\n<article>\n\t\n\t\t<section class=\"title\">\n\t<h1>attributes</h1>\n</section>\n\n\t\n\n\t\n\t\t\n\t\t\t<section class=\"description\">\n    \n</section>\n\n\t\t\n\t\n\n\n\n\n<div class=\"signature\">\n  <h2 class=\"signature-title\"><code>plugin</code></h2>\n  \n  \n  \n  \n  \n  \n  \n</div>\n\n\n\n\n\n\t\n\t\t\n\t\t\t<section class=\"body\">\n    <h2>Use</h2>\n<p>can-map-attributes is a plugin that helps convert and normalize data being set on an Map\nand allows you to specify the way complex types get serialized. The attributes plugin is most\nhelpful when used with [can-model] (because the serialization aids in sending data to a server),\nbut you can use it with any Map you plan to make instances\nfrom.</p>\n<p>There are three important static properties to give the class you want to use attributes with:</p>\n<ul>\n<li><code><a href=\"can-map-attributes.static.attributes.html\">attributes</a></code> lists the properties that will be normalized\nand the types those properties should be.</li>\n<li><code><a href=\"can-map-attributes.static.convert.html\">convert</a></code> lists how to convert and normalize arbitrary values\nto the types this class uses.</li>\n<li><code><a href=\"can-map-attributes.static.serialize.html\">serialize</a></code> lists serialization algorithms for the types\nthis class uses.</li>\n</ul>\n<p>Together, the functions in <em>convert</em> and <em>serialize</em> make up the type definitions for the class.\nThe attributes plugin comes with three useful predefined types: <code>'date'</code>, <code>'number'</code>, and <code>'boolean'</code>.</p>\n<p>Here is a quick example of an Map-based class using the attributes plugin to convert and normalize\nits data, and then to serialize the instance:</p>\n<pre><code>Bio = Map.extend({\n    attributes: {\n    birthday: 'date',\n    weight: 'number'\n}\n// Bio only uses built-in types, so no\n// need to specify serialize or convert.\n}, {});\n\nvar alice = new Bio({\n    birthday: Date.parse('1985-04-01'), // 481161600000\n    weight: '120'\n});\n\nalice.attr();      // { birthday: Date(481161600000), weight: 120 }\nalice.serialize(); // { birthday: 481161600000, weight: 120 }\n</code></pre>\n<h3>Demo</h3>\n<p>When a user enters a new date in the format of <em>YYYY-MM-DD</em>, the control\nlistens for changes in the input box and updates the Map using\nthe <code>attr</code> method which then converts the string into a JavaScript date object.</p>\n<p>Additionally, the control also listens for changes on the Map and\nupdates the age in the page for the new birthdate of the contact.</p>\n<div class='demo_wrapper' data-demo-src='../src/demo/attributes.html'></div>\n<h3>Reference types</h3>\n<p>Types listed in <code>attributes</code> can also be a functions, such as the <code>model</code> or\n<code>models</code> methods of a [can-model Model]. When data of this kind of type is set, this\nfunction is used to convert the raw data into an instance of the Model.</p>\n<p>This example builds on the previous one to demonstrate these reference types.</p>\n<pre><code>Bio = Map.extend({\n    attributes: {\n    birthday: 'date',\n    weight: 'number'\n}\n// Contact only uses built-in types, so you don't have\n// to specify serialize or convert.\n}, {});\n\nContact = Map.extend({\n    attributes: {\n        bio: 'Bio.newInstance'\n    }\n}, {});\n\nvar alice = new Contact({\n    first: 'Alice',\n    last: 'Liddell',\n    bio: {\n        birthday: Date.parse('1985-04-01'), // 481161600000\n        weight: 120\n    }\n});\n</code></pre>\n<p>The Attributes plugin provides functionality for converting data attributes from raw types and\nserializing complex types for the server.</p>\n<p>Below is an example code of an Map providing serialization and conversion for dates and numbers.</p>\n<p>When <code>Contact</code> is initialized, the <code>weight</code> attribute is set and converted to a <code>number</code> using the\nconverter we provided.  Next the <code>birthday</code> attribute is set using the <code>attr</code> method and gets converted\nas well.  Lastly, <code>serialize</code> is invoked converting the new attributes to raw types for the server.</p>\n<pre><code>var Contact = Map.extend({\n    attributes: {\n        birthday: 'date',\n        weight: 'number'\n    },\n    serialize : {\n        date : function( val, type ){\n            // returns the string formatted as 'YYYY-DD-MM'\n            return val.getYear() + \n                    &quot;-&quot; + (val.getMonth() + 1) + \n                    &quot;-&quot; + val.getDate(); \n        },\n        number: function(val){\n            return val + '';\n        }\n    },\n    convert: {\n        // converts string to date\n        date: function( date ) {\n            if ( typeof date == 'string' ) {\n                //- Extracts dates formated 'YYYY-DD-MM'\n                var matches = raw.match( /(\\d+)-(\\d+)-(\\d+)/ ); \n                \n                //- Parses to date object and returns\n                date = new Date( matches[ 1 ],\n                        ( +matches[ 2 ] ) - 1, \n                        matches[ 3 ] ); \n            }\n            \n            return date;\n        },\n    \n        // converts string to number\n        number: function(number){\n            if(typeof number === 'string'){\n                number = parseInt(number);\n            }\n            return number;\n        }\n    }\n}, {});\n\nvar brian = new Contact({\n    weight: '300'\n});\n\nvar weight = brian.attr('weight'); //-&gt; 300\n\n//- sets brian's birthday\nbrian.attr('birthday', '11-29-1983');\n\nvar date = brian.attr('birthday'); //-&gt; Date()\n\nvar seralizedObj = brian.serialize();\n//-&gt; { 'birthday': '11-29-1983', 'weight': '300' }\n</code></pre>\n<h2>Converter functions</h2>\n<p>Another common case is to create converter functions (<code>function(value, oldValue) {}</code>) that return a converted value:</p>\n<pre><code>var ValueMap = Map.extend({\n    attributes: {\n        value: function(orig) {\n            return orig * 100;\n        }\n    }\n},{});\n\nconsole.log(new ValueMap({ value: 0.83 }).attr('value'));\n</code></pre>\n<h2>Associations</h2>\n<p>The attribute plugin also allows setting up data associations between Maps or Models. This means\nthat nested data structures can be automatically converted into their Map or Model (using <code>Model.models</code>) representations by passing them as the attribute.\nIf the value to convert is an array it will be converted into its <code><a href=\"can-list.html\">Map.List</a></code> or <code>[can-model.List Model.List]</code> (using <code>[can-model.models Model.models]</code>) representation:</p>\n<pre><code>var Sword = Model.extend({\n    findAll: 'GET /swords'\n}, {\n    getPower: function() {\n        return this.attr('power') * 100;\n    }\n});\n\nvar Level = Model.extend({\n    findAll: 'GET /levels'\n}, {\n    getName: function() {\n        return 'Level: ' + this.attr('name');\n    }\n});\n\nvar Zelda = Model.extend({\n    findOne: 'GET /zelda/{id}'\n    attributes: {\n        sword: Sword,\n        levelsCompleted: Level\n    }\n},{});\n</code></pre>\n<p>Assuming that <code>Zelda.findOne({ id: 'link' })</code> will return something like:</p>\n<pre><code>{\n    sword: {\n        name: 'Wooden Sword',\n        power: 0.2\n    },\n    levelsCompleted : [\n        {id: 1, name: 'Aquamentus'},\n        {id: 2, name: 'Dodongo'}\n    ]\n}\n</code></pre>\n<p>The converted data will contain a list or Levels and a sword Model:</p>\n<pre><code>Zelda.findOne({ id: 'link' }).then(function(link) {\n    console.log(link.attr('sword').getPower()); // -&gt; 20\n    console.log(link.attr('levelsCompleted')[0].getName());\n    // -&gt; 'Level: Aquamentus'\n});\n</code></pre>\n<h3>Demo</h3>\n<p>Below is a demo that showcases associations between 2 different models to show the tasks\nfor each contact and how much time they have left to complete the task(s) using converters.</p>\n<div class='demo_wrapper' data-demo-src='../src/demo/attributes-assocations.html'></div>\n\n</section>\n\n\t\t\n\t\n</article>\n</div>\n","src":{"path":"node_modules/can-map-attributes/docs/attributes.md"},"description":"\n","type":"module","title":"attributes","types":[{"type":"plugin"}],"name":"can-map-attributes","parent":"can-legacy","plugin":"can/map/attributes","test":"src/test/test.html","download":"http://donejs.com/can/dist/can.map.attributes.js","deprecated":[{"version":"2.1","description":"The attributes plugin (and the setter plugin) have been deprecated in \nfavor of the new [can-map-define define] plugin, which provides the same \nfunctionality. It will still be maintained up to 3.0 and potentially after. \nProjects using converters or serializers should consider switching to [can-map-define.type define's type] \nand [can-map-define.serialize define's serialize].\n"}],"comment":" "};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
