<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: [object Object]
	@function can.ejs
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	
	<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
</head>

<body>
	<header><nav class="navbar">
	<a class="brand" href="../index.html">CanJS</a>

	<ul class="bitovi-menu">
		<li class="dropdown">
			<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
			<ul class="dropdown-menu">
				<li><a href="http://bitovi.com">Bitovi.com</a></li>
				<li><a href="http://bitovi.com/blog/">Blog</a></li>
				<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
				<li><a href="http://bitovi.com/training/">Training</a></li>
				<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
			</ul>
		</li>
	</ul>

	<ul class="navbar-items">
		<li class="dropdown">
				<a href="http://github.com/canjs/canjs">Github</a>
				<ul class="dropdown-menu">
      		<li><a href="http://github.com/canjs/can-connect">can-connect</a></li>
					<li><a href=".">can-set</a></li>
					<li><a href=".">can-compute</a></li>
					<li><a href=".">can-component</a></li>
				</ul>
		</li>
		<li>
			<a href="https://gitter.im/canjs/canjs">Chat</a>
		</li>
		<li>
			<a href="http://forums.donejs.com/c/canjs">Forum</a>
		</li>
	</ul>

</nav>
</header>
	<div class='main-container'>

	<nav class="sidebar">
    
        
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.elementAndAttributes.html">
							Elements and Attributes
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-core.html">
							Core
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-ecosystem.html">
							Ecosystem
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-infrastructure.html">
							Infrastructure
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-legacy.html">
							Legacy
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Component.html">
							can.Component
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Construct.html">
							can.Construct
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Control.html">
							can.Control
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.List.html">
							can.List
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Map.html">
							can.Map
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Model.html">
							can.Model
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="constructor"
							href="can.Model.List.html">
							can.Model.List
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.compute.html">
							can.compute
						</a>
						
					</li>
				

			
		
			
				
					<li class="current
                               parent
                               expanded">
						<a class="function"
							href="can.ejs.html">
							can.ejs
						</a>
						
							
	<ul>
		
			
				
					<li>
						<span>Tags</span>

						
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.ejs.tags.scriptlet.html">
							&lt;% CODE %&gt;
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.ejs.tags.escaped.html">
							&lt;%= CODE %&gt;
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.ejs.tags.unescaped.html">
							&lt;%== CODE %&gt;
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.ejs.tags.templated.html">
							&lt;%% CODE %&gt;
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.ejs.tags.comment.html">
							&lt;%# CODE %&gt;
						</a>
						
					</li>
				

			
		
	</ul>


					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.ejs.Helpers.html">
							Helpers
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.event.html">
							can.event
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.fixture.html">
							can.fixture
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.mustache.html">
							can.mustache
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.route.html">
							can.route
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.stache.html">
							can.stache
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.util.html">
							can.util
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="function"
							href="can.view.html">
							can.view
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can.view.bindings.html">
							can.view.bindings
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="guides.html">
							Guides
						</a>
						
					</li>
				

			
		
	</ul>


    
</nav>


<article>
	
		<section class="title">
	<h1>can.ejs</h1>
</section>

	

	
		
			<section class="description">
    <p>EJS provides <strong>live</strong> ERB-style client-side templates.</p>

</section>

		
	




<div class="signature">
  <h2 class="signature-title"><code>can.ejs( [id,] template )</code></h2>
  <p>Creates an instance of an EJS template.</p>

  
  
  <div class="parameters">
    <h3 class="parameters-title">Parameters</h3>
      <ol>
        
          <li><b>id</b> <code>{String}</code>: <p>If two arguments are passed, the first argument is the id of the
template that will be registered with <a href="can.view.html">can.view</a>.</p>
</li>
        
          <li><b>template</b> <code>{String}</code>: <p>The content of the mustache template.</p>
</li>
        
      </ol>
  </div>
  
  
  
  <ul>
      <li><b>returns</b> : <p>A function that renders the mustache template into
a live documentFragment.</p>
 </li>
  </ul>
  
  
  
</div>





	
		
			<section class="body">
    <h2>Basic Example</h2>
<p>The following renders a Teacher's name and students into an element.  First,
create a teacher template in a script tag like:</p>
<pre><code>&lt;script type='text/ejs' id='teacherEJS'&gt;

  &lt;h2 class='&lt;%= teacher.grade &lt; 'c'? &quot;good&quot; : &quot;bad&quot; %&gt;'&gt;
    &lt;%= teacher.name %&gt;
  &lt;/h2&gt;
  
  &lt;ul&gt;
    &lt;% for(var i =0; i&lt; teacher.students.length; i++){ %&gt;
      &lt;li&gt;&lt;%= teacher.students[i].name %&gt;&lt;/li&gt;
    &lt;% } %&gt;
  &lt;/ul&gt;
  
&lt;/script&gt;
</code></pre>
<p>Notice the magic tags?  Those are things that look like <code>&lt;% %&gt;</code> and
<code>&lt;%= %&gt;</code>.  Code between <code>&lt;% %&gt;</code> is run and the return value of code
between <code>&lt;%= %&gt;</code> is inserted into the page.</p>
<p>Next, create a teacher and use can.view to render the template:</p>
<pre><code>var teacher = {
  name : &quot;Mr. Smith&quot;,
  grade : &quot;a&quot;,
  students : [
    {name : &quot;Suzy&quot;},
    {name : &quot;Payal&quot;},
    {name : &quot;Curtis&quot;},
    {name : &quot;Alexis&quot;}
  ]
};

document.getElementById('teacher')
  .appendChild( can.view(&quot;teacherEJS&quot;, teacher) )
</code></pre>
<p>This results in HTML like:</p>
<pre><code>&lt;div id='teachers'&gt;
  &lt;h2 class='good'&gt;
    Mr. Smith
  &lt;/h2&gt;

  &lt;ul&gt;
     &lt;li&gt;Suzy&lt;/li&gt;
     &lt;li&gt;Payal&lt;/li&gt;
     &lt;li&gt;Curtis&lt;/li&gt;
     &lt;li&gt;Alexis&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>
<p>This is nice, but what if we change properties of the teacher?</p>
<h2>Basic Live Binding Example</h2>
<p>EJS sets up live templating binding when a <a href="can.Map.html">can.Map</a>'s properties are read
via <a href="can.Map.prototype.attr.html">attr</a> within a magic tag.  To make this template
respond to changes in the teacher data, first rewrite the template
to use the attr method to read properties and <code>list( observeList, cb(item, i) )</code>
to iterate through a list like:</p>
<pre><code>&lt;script type='text/ejs' id='teacherEJS'&gt;

  &lt;h2 class='&lt;%= teacher.attr('grade') &lt; 'c'? &quot;good&quot; : &quot;bad&quot; %&gt;'&gt;
    &lt;%= teacher.attr('name') %&gt;
  &lt;/h2&gt;
  
  &lt;ul&gt;
    &lt;% list(teacher.students, function(student){ %&gt;
      &lt;li&gt;&lt;%= student.attr('name') %&gt;&lt;/li&gt;
    &lt;% }) %&gt;
  &lt;/ul&gt;
  
&lt;/script&gt;
</code></pre>
<p><strong>Note:</strong> The end of this page discusses why using <code>list</code> is
helpful, but it does nothing fancy.</p>
<p>Next, turn your teacher into a <code>new can.Map(object)</code> and pass
that to <code>can.view</code>:</p>
<pre><code>var teacher = new can.Map({
  name : &quot;Mr. Smith&quot;,
  grade : &quot;a&quot;,
  students : [
    {name : &quot;Suzy&quot;},
    {name : &quot;Payal&quot;},
    {name : &quot;Curtis&quot;},
    {name : &quot;Alexis&quot;}
  ]
});

document.getElementById('teacher')
  .appendChild( can.view(&quot;teacherEJS&quot;, teacher) );
</code></pre>
<p>Finally, update some properties of teacher and slap your
head with disbelief ...</p>
<pre><code>teacher.attr('name',&quot;Prof. Snape&quot;)
teacher.attr('grade','f+')
teacher.attr('students').push({
  name : &quot;Harry Potter&quot;
})
</code></pre>
<p>... but don't slap it too hard, you'll need it for building awesome apps.</p>
<h2>Demo</h2>
<p>The following demo shows an EJS template being rendered with observable data.
It demonstrates live binding to attributes. The template and all data properties
are editable, so experiment!</p>
<div class='iframe_wrapper' data-iframe-src='can/view/ejs/doc/demo.html' data-iframe-height='1020'></div>
## Magic Tags
<p>EJS uses 5 types of tags:</p>
<p><strong><code>&lt;%= CODE %&gt;</code></strong> - Runs JS Code and writes the <em>escaped</em> result into the result of the template.</p>
<p>The following results in the user seeing &quot;my favorite element is &lt;blink&gt;BLINK&lt;blink&gt;&quot; and not
<blink>BLINK</blink>.</p>
<pre><code> &lt;div&gt;my favorite element is &lt;%= '&lt;blink&gt;BLINK&lt;/blink&gt;' %&gt;.&lt;/div&gt;
</code></pre>
<p><strong><code>&lt;%== CODE %&gt;</code></strong>  - Runs JS Code and writes the <em>unescaped</em> result into the result of the template.</p>
<p>The following results in &quot;my favorite element is <B>B</B>.&quot;. Using <code>&lt;%==</code> is useful
for sub-templates.</p>
<pre><code>     &lt;div&gt;my favorite element is &lt;%== '&lt;B&gt;B&lt;/B&gt;' %&gt;.&lt;/div&gt;
</code></pre>
<p><strong><code>&lt;%% CODE %&gt;</code></strong> - Writes &lt;% CODE %&gt; to the result of the template.  This is very useful for generators.</p>
<pre><code>     &lt;%%= 'hello world' %&gt;
</code></pre>
<p><strong><code>&lt;%# CODE %&gt;</code></strong>  - Used for comments.  This does nothing.</p>
<pre><code>     &lt;%# 'hello world' %&gt;
</code></pre>
<h2>Live Binding</h2>
<p>EJS allows live binding by wrapping magic tag content within a function. When <code>attr()</code> is called
to update an observable object, these functions are executed to return the new value.</p>
<pre><code>// Suppose an observable &quot;foo&quot;:

var foo = new can.Map({
  bar: 'baz'
});

// Suppose also, the above observable is passed to our view:

&lt;%= foo.attr('bar') %&gt;

// EJS locates the magic tag and turns the above into:

function() { return foo.attr('bar'); }

// As &quot;foo&quot; is updated using attr(), this function is called again to
// render the view with the new value.
</code></pre>
<p>This means that each function tag has a closure will reference variables in it's
parent functions. This can cause problems if you don't understand closures in
JavaScript. For example, the following binding does not work:</p>
<pre><code>&lt;% for(var i =0; i &lt; items.attr('length'); i++){ %&gt;
  &lt;li&gt;&lt;%= items[i].attr('name') %&gt;&lt;/li&gt;
&lt;% } %&gt;
</code></pre>
<p>This is because it gets turned into:</p>
<pre><code>&lt;% for(var i =0; i &lt; items.attr('length'); i++){ %&gt;
  LIVEBIND( function() { return items[i].attr('name') )
&lt;% } %&gt;
</code></pre>
<p>When the wrapping function is called again, <code>i</code> will
not be the index of the item, but instead be items.length.</p>
<p>The [can.Map.List.prototype.each can.Map.List.each] method on all observable lists should be used to iterate through it:</p>
<pre><code>&lt;% items.each(function(item){ %&gt;
  &lt;li&gt;&lt;%= item.attr('name') %&gt;&lt;/li&gt;
&lt;% }) %&gt;
</code></pre>
<h2>Advanced Live Binding</h2>
<p>Once you get the hang of how EJS works, it makes live-binding of complex
calculations possible.  The following extends a <a href="can.Model.List.html">can.Model.List</a> to suppot a <code>completed</code> method that
returns the total number of completed items in the list.  It can be used in a template like:</p>
<pre><code>&lt;h2&gt;&lt;%= todos.complete() %&gt; Complete Todos &lt;/h2&gt;
</code></pre>
<p>And implemented like:</p>
<pre><code>Todo.List = can.Model.List({
  completed: function() {
    var count = 0;

    this.attr('length');
    this.each(function(i, todo) {
      if(this.attr('completed')) {
        count++;
      }
    });

    return count;
  }
});
</code></pre>
<p><code>completed</code> listens on changes to the list (via <code>this.attr('length')</code>) and
each item's <code>'completed'</code> property.  EJS keeps track of which observe/attribute pairs are called
by <code>.complete()</code>.  If they change, EJS will automatically unbind.</p>
<p>Adding a &quot;completed&quot; helper function to the todo model list to return the number of completed todos:</p>
<p><strong>Note:</strong> The object passed into the view becomes &quot;this&quot; within the view template.</p>
<pre><code>var todos = Todo.findAll({}); //returns a can.Model.List
can.view('//todo/views/init.ejs', todos)
</code></pre>
<h2>Element Callbacks</h2>
<p>If a function is returned by the <code>&lt;%= %&gt;</code> or <code>&lt;%== %&gt;</code> magic tags within an element’s tag like:</p>
<pre><code>&lt;div &lt;%= function( element ) { element.style.display = 'none' } %&gt; &gt;
  Hello
&lt;/div&gt;
</code></pre>
<p>The function is called back with the HTMLElement as the first argument. This is useful to initialize functionality on an element within the view. This is so common that EJS supports ES5 arrow functions that get passed the NodeList wrapped element. Using jQuery, this lets you write the above callback as:</p>
<pre><code>&lt;div &lt;%= (el) -&gt; el.hide() %&gt; &gt;
  Hello
&lt;/div&gt;
</code></pre>
<p>This technique is commonly used to add data, especially model instances, to an element like:</p>
<pre><code>&lt;% todos.each( function( todo ) { %&gt;
  &lt;li &lt;%= (el) -&gt; el.data( 'todo', todo ) %&gt;&gt;
    &lt;%= todo.attr( 'name' ) %&gt;
  &lt;/li&gt;
&lt;% } ) %&gt;
</code></pre>
<p>jQuery’s <code>el.data( NAME, data )</code> adds data to an element. If your library does not support this, can provides it as <code>can.data( NodeList, NAME, data )</code>. Rewrite the above example as:</p>
<pre><code>&lt;% todos.each( function( todo ) { %&gt;
  &lt;li &lt;%= (el) -&gt; can.data( el, 'todo', todo ) %&gt;&gt;
    &lt;%= todo.attr( 'name' ) %&gt;
  &lt;/li&gt;
&lt;% } ) %&gt;
</code></pre>

</section>

		
	
</article>
</div>

	<footer><p>CanJS is part of <a href="http://donejs.com">DoneJS</a>. Created and maintained by the open source team at <a href="http://bitovi.com">Bitovi</a>. <strong>Currently v3.0.0.</strong></p></footer>

	<script type="text/javascript">
		var docObject = {"content":"<div class='main-container'>\n\n\t<nav class=\"sidebar\">\n    \n        \n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.elementAndAttributes.html\">\n\t\t\t\t\t\t\tElements and Attributes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-core.html\">\n\t\t\t\t\t\t\tCore\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-ecosystem.html\">\n\t\t\t\t\t\t\tEcosystem\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-infrastructure.html\">\n\t\t\t\t\t\t\tInfrastructure\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-legacy.html\">\n\t\t\t\t\t\t\tLegacy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Component.html\">\n\t\t\t\t\t\t\tcan.Component\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Construct.html\">\n\t\t\t\t\t\t\tcan.Construct\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Control.html\">\n\t\t\t\t\t\t\tcan.Control\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.List.html\">\n\t\t\t\t\t\t\tcan.List\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Map.html\">\n\t\t\t\t\t\t\tcan.Map\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Model.html\">\n\t\t\t\t\t\t\tcan.Model\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"constructor\"\n\t\t\t\t\t\t\thref=\"can.Model.List.html\">\n\t\t\t\t\t\t\tcan.Model.List\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.compute.html\">\n\t\t\t\t\t\t\tcan.compute\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"current\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.html\">\n\t\t\t\t\t\t\tcan.ejs\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>Tags</span>\n\n\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.tags.scriptlet.html\">\n\t\t\t\t\t\t\t&lt;% CODE %&gt;\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.tags.escaped.html\">\n\t\t\t\t\t\t\t&lt;%= CODE %&gt;\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.tags.unescaped.html\">\n\t\t\t\t\t\t\t&lt;%== CODE %&gt;\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.tags.templated.html\">\n\t\t\t\t\t\t\t&lt;%% CODE %&gt;\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.ejs.tags.comment.html\">\n\t\t\t\t\t\t\t&lt;%# CODE %&gt;\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.ejs.Helpers.html\">\n\t\t\t\t\t\t\tHelpers\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.event.html\">\n\t\t\t\t\t\t\tcan.event\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.fixture.html\">\n\t\t\t\t\t\t\tcan.fixture\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.mustache.html\">\n\t\t\t\t\t\t\tcan.mustache\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.route.html\">\n\t\t\t\t\t\t\tcan.route\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.stache.html\">\n\t\t\t\t\t\t\tcan.stache\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.util.html\">\n\t\t\t\t\t\t\tcan.util\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"function\"\n\t\t\t\t\t\t\thref=\"can.view.html\">\n\t\t\t\t\t\t\tcan.view\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can.view.bindings.html\">\n\t\t\t\t\t\t\tcan.view.bindings\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"guides.html\">\n\t\t\t\t\t\t\tGuides\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n    \n</nav>\n\n\n<article>\n\t\n\t\t<section class=\"title\">\n\t<h1>can.ejs</h1>\n</section>\n\n\t\n\n\t\n\t\t\n\t\t\t<section class=\"description\">\n    <p>EJS provides <strong>live</strong> ERB-style client-side templates.</p>\n\n</section>\n\n\t\t\n\t\n\n\n\n\n<div class=\"signature\">\n  <h2 class=\"signature-title\"><code>can.ejs( [id,] template )</code></h2>\n  <p>Creates an instance of an EJS template.</p>\n\n  \n  \n  <div class=\"parameters\">\n    <h3 class=\"parameters-title\">Parameters</h3>\n      <ol>\n        \n          <li><b>id</b> <code>{String}</code>: <p>If two arguments are passed, the first argument is the id of the\ntemplate that will be registered with <a href=\"can.view.html\">can.view</a>.</p>\n</li>\n        \n          <li><b>template</b> <code>{String}</code>: <p>The content of the mustache template.</p>\n</li>\n        \n      </ol>\n  </div>\n  \n  \n  \n  <ul>\n      <li><b>returns</b> : <p>A function that renders the mustache template into\na live documentFragment.</p>\n </li>\n  </ul>\n  \n  \n  \n</div>\n\n\n\n\n\n\t\n\t\t\n\t\t\t<section class=\"body\">\n    <h2>Basic Example</h2>\n<p>The following renders a Teacher's name and students into an element.  First,\ncreate a teacher template in a script tag like:</p>\n<pre><code>&lt;script type='text/ejs' id='teacherEJS'&gt;\n\n  &lt;h2 class='&lt;%= teacher.grade &lt; 'c'? &quot;good&quot; : &quot;bad&quot; %&gt;'&gt;\n    &lt;%= teacher.name %&gt;\n  &lt;/h2&gt;\n  \n  &lt;ul&gt;\n    &lt;% for(var i =0; i&lt; teacher.students.length; i++){ %&gt;\n      &lt;li&gt;&lt;%= teacher.students[i].name %&gt;&lt;/li&gt;\n    &lt;% } %&gt;\n  &lt;/ul&gt;\n  \n&lt;/script&gt;\n</code></pre>\n<p>Notice the magic tags?  Those are things that look like <code>&lt;% %&gt;</code> and\n<code>&lt;%= %&gt;</code>.  Code between <code>&lt;% %&gt;</code> is run and the return value of code\nbetween <code>&lt;%= %&gt;</code> is inserted into the page.</p>\n<p>Next, create a teacher and use can.view to render the template:</p>\n<pre><code>var teacher = {\n  name : &quot;Mr. Smith&quot;,\n  grade : &quot;a&quot;,\n  students : [\n    {name : &quot;Suzy&quot;},\n    {name : &quot;Payal&quot;},\n    {name : &quot;Curtis&quot;},\n    {name : &quot;Alexis&quot;}\n  ]\n};\n\ndocument.getElementById('teacher')\n  .appendChild( can.view(&quot;teacherEJS&quot;, teacher) )\n</code></pre>\n<p>This results in HTML like:</p>\n<pre><code>&lt;div id='teachers'&gt;\n  &lt;h2 class='good'&gt;\n    Mr. Smith\n  &lt;/h2&gt;\n\n  &lt;ul&gt;\n     &lt;li&gt;Suzy&lt;/li&gt;\n     &lt;li&gt;Payal&lt;/li&gt;\n     &lt;li&gt;Curtis&lt;/li&gt;\n     &lt;li&gt;Alexis&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n<p>This is nice, but what if we change properties of the teacher?</p>\n<h2>Basic Live Binding Example</h2>\n<p>EJS sets up live templating binding when a <a href=\"can.Map.html\">can.Map</a>'s properties are read\nvia <a href=\"can.Map.prototype.attr.html\">attr</a> within a magic tag.  To make this template\nrespond to changes in the teacher data, first rewrite the template\nto use the attr method to read properties and <code>list( observeList, cb(item, i) )</code>\nto iterate through a list like:</p>\n<pre><code>&lt;script type='text/ejs' id='teacherEJS'&gt;\n\n  &lt;h2 class='&lt;%= teacher.attr('grade') &lt; 'c'? &quot;good&quot; : &quot;bad&quot; %&gt;'&gt;\n    &lt;%= teacher.attr('name') %&gt;\n  &lt;/h2&gt;\n  \n  &lt;ul&gt;\n    &lt;% list(teacher.students, function(student){ %&gt;\n      &lt;li&gt;&lt;%= student.attr('name') %&gt;&lt;/li&gt;\n    &lt;% }) %&gt;\n  &lt;/ul&gt;\n  \n&lt;/script&gt;\n</code></pre>\n<p><strong>Note:</strong> The end of this page discusses why using <code>list</code> is\nhelpful, but it does nothing fancy.</p>\n<p>Next, turn your teacher into a <code>new can.Map(object)</code> and pass\nthat to <code>can.view</code>:</p>\n<pre><code>var teacher = new can.Map({\n  name : &quot;Mr. Smith&quot;,\n  grade : &quot;a&quot;,\n  students : [\n    {name : &quot;Suzy&quot;},\n    {name : &quot;Payal&quot;},\n    {name : &quot;Curtis&quot;},\n    {name : &quot;Alexis&quot;}\n  ]\n});\n\ndocument.getElementById('teacher')\n  .appendChild( can.view(&quot;teacherEJS&quot;, teacher) );\n</code></pre>\n<p>Finally, update some properties of teacher and slap your\nhead with disbelief ...</p>\n<pre><code>teacher.attr('name',&quot;Prof. Snape&quot;)\nteacher.attr('grade','f+')\nteacher.attr('students').push({\n  name : &quot;Harry Potter&quot;\n})\n</code></pre>\n<p>... but don't slap it too hard, you'll need it for building awesome apps.</p>\n<h2>Demo</h2>\n<p>The following demo shows an EJS template being rendered with observable data.\nIt demonstrates live binding to attributes. The template and all data properties\nare editable, so experiment!</p>\n<div class='iframe_wrapper' data-iframe-src='can/view/ejs/doc/demo.html' data-iframe-height='1020'></div>\n## Magic Tags\n<p>EJS uses 5 types of tags:</p>\n<p><strong><code>&lt;%= CODE %&gt;</code></strong> - Runs JS Code and writes the <em>escaped</em> result into the result of the template.</p>\n<p>The following results in the user seeing &quot;my favorite element is &lt;blink&gt;BLINK&lt;blink&gt;&quot; and not\n<blink>BLINK</blink>.</p>\n<pre><code> &lt;div&gt;my favorite element is &lt;%= '&lt;blink&gt;BLINK&lt;/blink&gt;' %&gt;.&lt;/div&gt;\n</code></pre>\n<p><strong><code>&lt;%== CODE %&gt;</code></strong>  - Runs JS Code and writes the <em>unescaped</em> result into the result of the template.</p>\n<p>The following results in &quot;my favorite element is <B>B</B>.&quot;. Using <code>&lt;%==</code> is useful\nfor sub-templates.</p>\n<pre><code>     &lt;div&gt;my favorite element is &lt;%== '&lt;B&gt;B&lt;/B&gt;' %&gt;.&lt;/div&gt;\n</code></pre>\n<p><strong><code>&lt;%% CODE %&gt;</code></strong> - Writes &lt;% CODE %&gt; to the result of the template.  This is very useful for generators.</p>\n<pre><code>     &lt;%%= 'hello world' %&gt;\n</code></pre>\n<p><strong><code>&lt;%# CODE %&gt;</code></strong>  - Used for comments.  This does nothing.</p>\n<pre><code>     &lt;%# 'hello world' %&gt;\n</code></pre>\n<h2>Live Binding</h2>\n<p>EJS allows live binding by wrapping magic tag content within a function. When <code>attr()</code> is called\nto update an observable object, these functions are executed to return the new value.</p>\n<pre><code>// Suppose an observable &quot;foo&quot;:\n\nvar foo = new can.Map({\n  bar: 'baz'\n});\n\n// Suppose also, the above observable is passed to our view:\n\n&lt;%= foo.attr('bar') %&gt;\n\n// EJS locates the magic tag and turns the above into:\n\nfunction() { return foo.attr('bar'); }\n\n// As &quot;foo&quot; is updated using attr(), this function is called again to\n// render the view with the new value.\n</code></pre>\n<p>This means that each function tag has a closure will reference variables in it's\nparent functions. This can cause problems if you don't understand closures in\nJavaScript. For example, the following binding does not work:</p>\n<pre><code>&lt;% for(var i =0; i &lt; items.attr('length'); i++){ %&gt;\n  &lt;li&gt;&lt;%= items[i].attr('name') %&gt;&lt;/li&gt;\n&lt;% } %&gt;\n</code></pre>\n<p>This is because it gets turned into:</p>\n<pre><code>&lt;% for(var i =0; i &lt; items.attr('length'); i++){ %&gt;\n  LIVEBIND( function() { return items[i].attr('name') )\n&lt;% } %&gt;\n</code></pre>\n<p>When the wrapping function is called again, <code>i</code> will\nnot be the index of the item, but instead be items.length.</p>\n<p>The [can.Map.List.prototype.each can.Map.List.each] method on all observable lists should be used to iterate through it:</p>\n<pre><code>&lt;% items.each(function(item){ %&gt;\n  &lt;li&gt;&lt;%= item.attr('name') %&gt;&lt;/li&gt;\n&lt;% }) %&gt;\n</code></pre>\n<h2>Advanced Live Binding</h2>\n<p>Once you get the hang of how EJS works, it makes live-binding of complex\ncalculations possible.  The following extends a <a href=\"can.Model.List.html\">can.Model.List</a> to suppot a <code>completed</code> method that\nreturns the total number of completed items in the list.  It can be used in a template like:</p>\n<pre><code>&lt;h2&gt;&lt;%= todos.complete() %&gt; Complete Todos &lt;/h2&gt;\n</code></pre>\n<p>And implemented like:</p>\n<pre><code>Todo.List = can.Model.List({\n  completed: function() {\n    var count = 0;\n\n    this.attr('length');\n    this.each(function(i, todo) {\n      if(this.attr('completed')) {\n        count++;\n      }\n    });\n\n    return count;\n  }\n});\n</code></pre>\n<p><code>completed</code> listens on changes to the list (via <code>this.attr('length')</code>) and\neach item's <code>'completed'</code> property.  EJS keeps track of which observe/attribute pairs are called\nby <code>.complete()</code>.  If they change, EJS will automatically unbind.</p>\n<p>Adding a &quot;completed&quot; helper function to the todo model list to return the number of completed todos:</p>\n<p><strong>Note:</strong> The object passed into the view becomes &quot;this&quot; within the view template.</p>\n<pre><code>var todos = Todo.findAll({}); //returns a can.Model.List\ncan.view('//todo/views/init.ejs', todos)\n</code></pre>\n<h2>Element Callbacks</h2>\n<p>If a function is returned by the <code>&lt;%= %&gt;</code> or <code>&lt;%== %&gt;</code> magic tags within an element’s tag like:</p>\n<pre><code>&lt;div &lt;%= function( element ) { element.style.display = 'none' } %&gt; &gt;\n  Hello\n&lt;/div&gt;\n</code></pre>\n<p>The function is called back with the HTMLElement as the first argument. This is useful to initialize functionality on an element within the view. This is so common that EJS supports ES5 arrow functions that get passed the NodeList wrapped element. Using jQuery, this lets you write the above callback as:</p>\n<pre><code>&lt;div &lt;%= (el) -&gt; el.hide() %&gt; &gt;\n  Hello\n&lt;/div&gt;\n</code></pre>\n<p>This technique is commonly used to add data, especially model instances, to an element like:</p>\n<pre><code>&lt;% todos.each( function( todo ) { %&gt;\n  &lt;li &lt;%= (el) -&gt; el.data( 'todo', todo ) %&gt;&gt;\n    &lt;%= todo.attr( 'name' ) %&gt;\n  &lt;/li&gt;\n&lt;% } ) %&gt;\n</code></pre>\n<p>jQuery’s <code>el.data( NAME, data )</code> adds data to an element. If your library does not support this, can provides it as <code>can.data( NodeList, NAME, data )</code>. Rewrite the above example as:</p>\n<pre><code>&lt;% todos.each( function( todo ) { %&gt;\n  &lt;li &lt;%= (el) -&gt; can.data( el, 'todo', todo ) %&gt;&gt;\n    &lt;%= todo.attr( 'name' ) %&gt;\n  &lt;/li&gt;\n&lt;% } ) %&gt;\n</code></pre>\n\n</section>\n\n\t\t\n\t\n</article>\n</div>\n","src":{"path":"node_modules/can-model/node_modules/can/view/ejs/doc/ejs.md"},"description":"EJS provides __live__ ERB-style client-side templates. \n","title":"","name":"can.ejs","type":"function","parent":"canjs","link":"../docco/ejs.html docco","deprecated":[{"version":"2.1","description":"EJS is incompatable with [can.Component] and should\nbe avoided for new projects. It will still be maintained up to \n3.0 and potentially after. Projects using EJS should consider\nswitching to [can.stache].\n\n"}],"signatures":[{"code":"can.ejs( [id,] template )","description":"\n\nCreates an instance of an EJS template. \n","params":[{"types":[{"type":"String"}],"optional":true,"name":"id","description":"If two arguments are passed, the first argument is the id of the \ntemplate that will be registered with [can.view].\n"},{"types":[{"type":"String"}],"name":"template","description":"The content of the mustache template.\n"}],"returns":{"types":[{"type":"can.view.renderer"}],"description":"A function that renders the mustache template into\na live documentFragment.\n"}}],"_curParam":{"types":[{"type":"String"}],"name":"template","description":"The content of the mustache template.\n"},"_curReturn":{"types":[{"type":"can.view.renderer"}],"description":"A function that renders the mustache template into\na live documentFragment.\n"},"comment":" "};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
